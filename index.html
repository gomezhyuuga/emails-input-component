<html lang="en">
  <head>
    <title>Miro Assessment</title>
    <meta charset="UTF-8" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/modern-css-reset/dist/reset.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="src/index.css" />
    <link rel="canonical" href="src/favicon.png" />
  </head>

  <body>
    <div class="alert">
      <a href="https://gomezh.dev/miro-emails-input" target="_blank"
        >See docs here</a
      >
    </div>

    <div class="modal">
      <div class="modal__body">
        <h1 class="modal__header">
          Share <strong>Board I ‚ù§ Miro</strong> with others
        </h1>
        <div id="emails-input1"></div>
      </div>
      <div class="modal__actions">
        <div class="controls">
          <button class="MiroButton" id="btn-addEmail">Add email</button>
          <button class="MiroButton" id="btn-getEmailsCount">
            Get emails count
          </button>
        </div>
      </div>
    </div>

    <div class="modal">
      <div class="modal__body">
        <h1 class="modal__header">
          Share <strong>Board Second</strong> with others
        </h1>
        <div id="emails-input2"></div>
      </div>
      <div class="modal__actions">
        <div class="controls">
          <button class="MiroButton" id="btn-addEmail2">Add email</button>
          <button class="MiroButton" id="btn-getEmailsCount2">
            Get emails count
          </button>
        </div>
      </div>
    </div>

    <div class="modal">
      <div class="modal__body">
        <h1 class="modal__header">
          Share <strong>Very Popular Board</strong> with others
        </h1>
        <div id="emails-input3"></div>
      </div>
      <div class="modal__actions">
        <div class="controls">
          <button class="MiroButton" id="btn-addEmail3">Add 30 emails</button>
          <button class="MiroButton" id="btn-getEmailsCount3">
            Get emails count
          </button>
        </div>
      </div>
    </div>

    <script src="./src/index.ts"></script>

    <script>
      const INITIAL_EMAILS = [
        'john@miro.com',
        'invalid.email',
        'mike@miro.com',
        'alexander@miro.com',
      ];

      // Emails to paste
      // john@miro.com, invalid.email,mike@miro.com, alexander@miro.com

      function onChangeCB(newEmails) {
        console.log('Emails has changed', newEmails);
      }

      const input1 = new EmailsInput(document.getElementById('emails-input1'), {
        initialEmails: INITIAL_EMAILS,
        onChange: onChangeCB,
      });
      const input2 = new EmailsInput(document.getElementById('emails-input2'));
      input2.onChange = onChangeCB;
      const input3 = new EmailsInput(document.getElementById('emails-input3'));

      const addBtn = document.getElementById('btn-addEmail');
      const countBtn = document.getElementById('btn-getEmailsCount');

      addBtn.addEventListener('click', () => {
        input1.addEmail(window.__randomEmail());
      });
      countBtn.addEventListener('click', () => {
        window.alert(`Count of emails: ${input1.getEmails().length}`);
      });

      document.getElementById('btn-addEmail2').addEventListener('click', () => {
        input2.addEmail(window.__randomEmail());
      });
      document
        .getElementById('btn-getEmailsCount2')
        .addEventListener('click', () => {
          alert(`Count for second input: ${input2.getEmails().length}`);
        });

      document.getElementById('btn-addEmail3').addEventListener('click', () => {
        const length = input3.getEmails().length;
        for (let i = 0; i < 30; i++)
          input3.addEmail(`email-${length + i + 1}@example.com`);
      });
      document
        .getElementById('btn-getEmailsCount3')
        .addEventListener('click', () => {
          alert(`Count for second input: ${input3.getEmails().length}`);
        });
    </script>
  </body>
</html>
